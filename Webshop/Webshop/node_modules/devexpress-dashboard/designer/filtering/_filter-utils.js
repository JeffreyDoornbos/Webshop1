/**
* DevExpress Dashboard (_filter-utils.js)
* Version:  22.2.4
* Build date: Jan 24, 2023
* Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED
* License: https://www.devexpress.com/Support/EULAs/universal.xml
*/
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createItemFilterOptions = void 0;
const analytics_widgets_1 = require("@devexpress/analytics-core/analytics-widgets");
const ko = require("knockout");
const _parameters_helper_1 = require("../../model/parameters/_parameters-helper");
const _dx_designer_integration_1 = require("../_dx-designer-integration");
var createItemFilterOptions = (expression, item, _dataSourceBrowser, title) => {
    return ko.computed(() => {
        var options = new analytics_widgets_1.FilterStringOptions(expression, undefined, undefined, title);
        options.popupContainer = '.dx-dashboard-widget-container';
        options.helper.aceTheme = _dx_designer_integration_1.getAceTheme();
        if (_dataSourceBrowser && _dataSourceBrowser.parameters) {
            options.helper.parameters(_dataSourceBrowser.parameters().map(parameter => {
                var shortTypeName = parameter.type().split(',')[0];
                return { displayName: parameter.name(), name: parameter.name(), specifics: _parameters_helper_1.ParameterHelper.typeValues.filter(typeDescription => typeDescription.value === shortTypeName)[0].specifics || 'string' };
            }));
            options.helper.canChoiceParameters = true;
        }
        if (item) {
            options['item'] = item;
        }
        return options;
    });
};
exports.createItemFilterOptions = createItemFilterOptions;
